{% extends 'index.html' %}
{% load static %}

{% block content %}
<div class="container-fluid mt-5">
    <!-- Page Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <div>
                    <h1 class="page-title" style="color: #EDEDED;">
                        <i class="fas fa-boxes"></i> Manage Products
                    </h1>
                    <p class="text-muted">View, edit, and manage all products in your store</p>
                </div>
                <a href="{% url 'admin_add_product' %}" class="btn btn-primary" style="background: #7B61FF; border: none; padding: 10px 25px; font-size: 1rem;">
                    <i class="fas fa-plus"></i> Add New Product
                </a>
            </div>
            <hr style="border-color: #444;">
        </div>
    </div>

    <!-- Products Table -->
    <div class="row">
        <div class="col-12">
            {% if products %}
                <div class="table-responsive">
                    <table class="table" style="background: #1a1a1a; border: 1px solid #333; color: #EDEDED;">
                        <thead style="background: #252525; border-bottom: 2px solid #7B61FF;">
                            <tr>
                                <th style="color: #7B61FF;">ID</th>
                                <th style="color: #7B61FF;">Image</th>
                                <th style="color: #7B61FF;">Product Name</th>
                                <th style="color: #7B61FF;">Category</th>
                                <th style="color: #7B61FF;">Price</th>
                                <th style="color: #7B61FF;">Stock</th>
                                <th style="color: #7B61FF;">Views</th>
                                <th style="color: #7B61FF;">Status</th>
                                <th style="color: #7B61FF;">Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for product in products %}
                            <tr style="border-bottom: 1px solid #333; transition: background 0.3s ease;" onmouseover="this.style.background='#222';" onmouseout="this.style.background='transparent';">
                                <td>
                                    <span class="badge" style="background: #7B61FF;">#{{ product.id }}</span>
                                </td>
                                <td>
                                    {% if product.imageURL %}
                                        <img src="{{ product.imageURL }}" alt="{{ product.name }}" style="height: 50px; width: 50px; border-radius: 5px; object-fit: cover;">
                                    {% else %}
                                        <div style="height: 50px; width: 50px; background: #333; border-radius: 5px; display: flex; align-items: center; justify-content: center;">
                                            <i class="fas fa-image text-muted"></i>
                                        </div>
                                    {% endif %}
                                </td>
                                <td>
                                    <a href="{% url 'product-detail' product.id %}" style="color: #00C2FF; text-decoration: none; transition: color 0.3s ease;" onmouseover="this.style.color='#00E5FF';" onmouseout="this.style.color='#00C2FF';">
                                        {{ product.name }}
                                    </a>
                                </td>
                                <td>
                                    {% if product.category %}
                                        <span class="badge" style="background: #FF6B35;">{{ product.category }}</span>
                                    {% else %}
                                        <span class="text-muted">N/A</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <span style="color: #FFB703; font-weight: bold;">${{ product.price }}</span>
                                </td>
                                <td>
                                    {% if product.in_stock %}
                                        <span class="badge" style="background: #4CAF50;">{{ product.stock }} in stock</span>
                                    {% else %}
                                        <span class="badge" style="background: #F44336;">Out of stock</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <span style="color: #A196FF;">{{ product.views }}</span>
                                </td>
                                <td>
                                    {% if product.digital %}
                                        <span class="badge" style="background: #9C27B0;">Digital</span>
                                    {% else %}
                                        <span class="badge" style="background: #2196F3;">Physical</span>
                                    {% endif %}
                                </td>
                                <td>
                                    <div class="btn-group btn-group-sm" role="group">
                                        <a href="{% url 'admin_edit_product' product.id %}" class="btn btn-sm" style="background: #7B61FF; border: none; color: white;">
                                            <i class="fas fa-edit"></i> Edit
                                        </a>
                                        <a href="{% url 'admin_delete_product' product.id %}" class="btn btn-sm" style="background: #F44336; border: none; color: white;" onclick="return confirm('Are you sure you want to delete this product?');">
                                            <i class="fas fa-trash"></i> Delete
                                        </a>
                                    </div>
                                </td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>

                <!-- Product Summary -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card" style="background: #1a1a1a; border: 1px solid #333; border-radius: 10px;">
                            <div class="card-body">
                                <h5 class="card-title text-light">Product Summary</h5>
                                <p class="text-muted mb-0">
                                    Total Products: <strong style="color: #7B61FF;">{{ products.count }}</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            {% else %}
                <!-- Empty State -->
                <div class="card" style="background: #1a1a1a; border: 1px solid #333; border-radius: 10px; padding: 60px 20px;">
                    <div class="text-center">
                        <div style="font-size: 4rem; color: #555; margin-bottom: 20px;">
                            <i class="fas fa-inbox"></i>
                        </div>
                        <h4 class="text-light mb-2">No Products Yet</h4>
                        <p class="text-muted mb-4">You haven't added any products to your store yet.</p>
                        <a href="{% url 'admin_add_product' %}" class="btn btn-primary" style="background: #7B61FF; border: none;">
                            <i class="fas fa-plus"></i> Add Your First Product
                        </a>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
</div>

<style>
    .page-title {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 0.5rem;
    }
    
    .table {
        margin-bottom: 0;
    }
    
    .table th {
        font-weight: 600;
        text-transform: uppercase;
        font-size: 0.85rem;
        padding: 15px;
    }
    
    .table td {
        padding: 15px;
        vertical-align: middle;
    }
    
    .badge {
        padding: 5px 10px;
        border-radius: 5px;
        font-size: 0.85rem;
        font-weight: 500;
    }
    
    .btn-group-sm .btn {
        padding: 5px 10px;
        font-size: 0.85rem;
        transition: all 0.3s ease;
    }
    
    .btn-group-sm .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    }
</style>
{% endblock %}
