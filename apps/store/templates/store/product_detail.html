{% extends 'index.html' %}
{% load static %}

{% block content %}

<div class="row product-detail-row">
    <div class="col-md-6 mb-4 mb-md-0">
        <img src="{{product.imageURL}}" class="img-fluid rounded product-detail-img" alt="{{product.name}}">
    </div>
    <div class="col-md-6 product-detail-content">
        <h2 class="product-detail-title">{{product.name}}</h2>
        {% if product.category %}
        <p><span class="badge bg-secondary">{{product.category}}</span></p>
        {% endif %}
        <h3 class="product-detail-price"><img src="{% static 'images/rupee.svg' %}" style="width: 20px;"/> {{product.price|floatformat:2}}</h3>
        
        <div class="mt-3 product-detail-desc">{{product.description|safe|default:"No description available."}}</div>
        
        <div class="mt-4">
            {% if product.in_stock %}
                <p class="text-success">In Stock: {{product.stock}} available</p>
                <button data-product={{product.id}} data-action="add" class="btn btn-primary btn-lg update-cart product-detail-btn">Add to Cart</button>
            {% else %}
                <p class="text-danger">Out of Stock</p>
                <button class="btn btn-secondary btn-lg product-detail-btn" disabled>Out of Stock</button>
            {% endif %}
        </div>
        
        <div class="mt-3">
            <a href="{% url 'store' %}" class="btn btn-outline-secondary">Back to Store</a>
        </div>
    </div>
</div>

<style>
.product-detail-content {
    overflow-wrap: break-word;
    word-wrap: break-word;
    word-break: break-word;
}

.product-detail-title {
    overflow-wrap: break-word;
    word-wrap: break-word;
    hyphens: auto;
}

.product-detail-desc {
    overflow-wrap: break-word;
    word-wrap: break-word;
    word-break: break-word;
}

.product-detail-desc * {
    max-width: 100% !important;
    overflow-wrap: break-word !important;
    word-wrap: break-word !important;
}

.product-detail-desc table {
    width: 100% !important;
    display: block;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

.product-detail-desc img {
    max-width: 100% !important;
    height: auto !important;
}

@media (max-width: 768px) {
    .product-detail-row {
        margin: 0;
    }
    
    .product-detail-content {
        padding: 0 0.5rem;
    }
    
    .product-detail-title {
        font-size: 1.25rem;
        line-height: 1.3;
        margin-bottom: 0.75rem;
    }
    
    .product-detail-price {
        font-size: 1.35rem;
    }
    
    .product-detail-desc {
        font-size: 0.9rem;
        line-height: 1.5;
    }
    
    .product-detail-desc p {
        margin-bottom: 0.75rem;
    }
    
    .product-detail-desc ul,
    .product-detail-desc ol {
        padding-left: 1.25rem;
    }
    
    .product-detail-btn {
        width: 100%;
        font-size: 0.95rem;
        padding: 0.7rem;
        margin-bottom: 0.5rem;
    }
    
    .product-detail-img {
        max-height: 280px;
        object-fit: contain;
        width: 100%;
    }
}

@media (max-width: 576px) {
    .product-detail-content {
        padding: 0 0.25rem;
    }
    
    .product-detail-title {
        font-size: 1.1rem;
        line-height: 1.25;
    }
    
    .product-detail-price {
        font-size: 1.2rem;
    }
    
    .product-detail-desc {
        font-size: 0.85rem;
        line-height: 1.4;
    }
    
    .badge {
        font-size: 0.7rem;
        padding: 0.25rem 0.5rem;
    }
    
    .product-detail-img {
        max-height: 240px;
    }
}
</style>

{% endblock content %}
